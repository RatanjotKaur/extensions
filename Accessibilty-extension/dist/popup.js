(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const c={bigText:!1,boldText:!1,highContrast:!1,grayscale:!1,invert:!1,hideImages:!1,highlightLinks:!1,blackCursor:!1,whiteCursor:!1,seizureSafe:!1};function u(e){chrome.tabs.query({},t=>{t.forEach(s=>{s.id&&chrome.tabs.sendMessage(s.id,e,()=>{chrome.runtime.lastError})})})}function d(e){chrome.storage.sync.set({settings:e})}function r(e){chrome.storage.sync.get("settings",t=>{const s=Object.assign({},c,t.settings||{});s[e]=!s[e],d(s),u(s),a(s)})}function a(e){document.getElementById("bigText").classList.toggle("active",!!e.bigText),document.getElementById("contrast").classList.toggle("active",!!e.highContrast),document.getElementById("grayscale").classList.toggle("active",!!e.grayscale),document.getElementById("hideImages").classList.toggle("active",!!e.hideImages),document.getElementById("zoom").classList.toggle("active",!!e.magnifier)}function g(e){const t=speechSynthesis.getVoices();e.innerHTML="",t.forEach(s=>{const o=document.createElement("option");o.value=s.name,o.textContent=`${s.name} (${s.lang})`,e.appendChild(o)})}function m(){const e=document.getElementById("ttsVoice"),t=document.getElementById("ttsRate");if(!e||!t)return;const s=()=>{g(e),chrome.storage.sync.get(["ttsVoice","ttsRate"],o=>{o.ttsVoice&&(e.value=o.ttsVoice),o.ttsRate&&(t.value=o.ttsRate)})};g(e),window.speechSynthesis.onvoiceschanged=s,e.addEventListener("change",()=>{chrome.storage.sync.set({ttsVoice:e.value})}),t.addEventListener("input",()=>{chrome.storage.sync.set({ttsRate:parseFloat(t.value)})})}function f(){d(c),u(c),a(c)}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("bigText").addEventListener("click",()=>r("bigText")),document.getElementById("contrast").addEventListener("click",()=>r("highContrast")),document.getElementById("grayscale").addEventListener("click",()=>r("grayscale")),document.getElementById("hideImages").addEventListener("click",()=>r("hideImages")),document.getElementById("zoom").addEventListener("click",()=>{chrome.storage.sync.get("settings",e=>{const t=Object.assign({},c,e.settings||{});t.magnifier=!t.magnifier,d(t),chrome.tabs.query({},s=>{s.forEach(o=>{o.id&&chrome.tabs.sendMessage(o.id,{action:"magnifier-toggle"},()=>{chrome.runtime.lastError})})}),a(t)})}),document.getElementById("reset").addEventListener("click",f),chrome.storage.sync.get("settings",e=>{const t=Object.assign({},c,e.settings||{});a(t)}),m()});
